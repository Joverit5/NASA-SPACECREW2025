<!doctype html>
<html>
<head><meta charset="utf-8"><title>Preview grid</title></head>
<body style="background:#222;color:#eee;font-family:sans-serif">
<h3>Preview grid - select files below</h3>
<input id="imgFile" type="file" accept="image/*"><input id="jsonFile" type="file" accept=".json">
<div style="display:flex;gap:20px;margin-top:10px">
  <canvas id="c" width="640" height="640" style="border:1px solid #333;background:black"></canvas>
</div>
<script>
const c = document.getElementById('c'), ctx = c.getContext('2d');
let img = new Image();
document.getElementById('imgFile').addEventListener('change', (e)=> {
  const f = e.target.files[0];
  if (!f) return;
  const url = URL.createObjectURL(f);
  img.onload = () => draw();
  img.src = url;
});
document.getElementById('jsonFile').addEventListener('change', (e)=> {
  const f = e.target.files[0];
  if (!f) return;
  const reader = new FileReader();
  reader.onload = ()=> {
    const j = JSON.parse(reader.result);
    window._grid = j;
    draw();
  };
  reader.readAsText(f);
});
function draw() {
  if (!img.src) {
    ctx.fillStyle='#222'; ctx.fillRect(0,0,c.width,c.height); return;
  }
  // draw image fitted
  ctx.clearRect(0,0,c.width,c.height);
  ctx.drawImage(img,0,0,c.width,c.height);
  if (!window._grid) return;
  const grid = window._grid.cells;
  const n = grid.length;
  const cellW = c.width / n, cellH = c.height / n;
  for (let y=0;y<n;y++) for (let x=0;x<n;x++) {
    const allowed = grid[y][x];
    ctx.fillStyle = allowed ? 'rgba(0,255,0,0.18)' : 'rgba(255,0,0,0.35)';
    ctx.fillRect(x*cellW, y*cellH, cellW, cellH);
    ctx.strokeStyle = 'rgba(0,0,0,0.3)'; ctx.strokeRect(x*cellW, y*cellH, cellW, cellH);
  }
}
</script>
</body>
</html>
